# æ²™é”…å¯¼å›¾

ä¸€ä¸ªåŸºäºReactçš„æ™ºèƒ½æ€ç»´å¯¼å›¾åº”ç”¨,æ”¯æŒè‡ªç„¶å¯¹è¯å¼åˆ›å»ºå’Œç¼–è¾‘æ€ç»´å¯¼å›¾,é›†æˆAIåŠ©æ‰‹å®ç°æ™ºèƒ½é—®ç­”ã€‚

## ä¸»è¦ç‰¹æ€§

- ğŸ¤– AIæ™ºèƒ½é—®ç­”
- ğŸ“ è‡ªç„¶å¯¹è¯å¼ç¼–è¾‘
- ğŸ¯ ç›´è§‚çš„æ€ç»´å¯¼å›¾å±•ç¤º
- ğŸ–±ï¸ æ”¯æŒç¼©æ”¾å’Œæ‹–æ‹½
- âœ¨ æµç•…çš„åŠ¨ç”»æ•ˆæœ
- ğŸ“± å“åº”å¼å¸ƒå±€

## å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚
- Node.js >= 14.0.0
- npm >= 6.14.0

### å®‰è£…
npm install

### è¿è¡Œ
å¯åŠ¨åç«¯æœåŠ¡:
npm run server:dev

å¯åŠ¨å‰ç«¯å¼€å‘æœåŠ¡å™¨:
npm start

### å¼€å‘ç¯å¢ƒé…ç½®(å¯é€‰)
1. å¤åˆ¶ `.env.example` ä¸º `.env`
2. é…ç½®å¿…è¦çš„ç¯å¢ƒå˜é‡:
REACT_APP_API_URL=http://localhost:3001
ARK_API_KEY=your_api_key
API_BASE_URL=your_base_url

## é¡¹ç›®ç»“æ„
src/
â”œâ”€â”€ components/ # é€šç”¨ç»„ä»¶
â”œâ”€â”€ features/ # åŠŸèƒ½æ¨¡å—
â”‚ â”œâ”€â”€ ai/ # AI ç›¸å…³åŠŸèƒ½
â”‚ â”œâ”€â”€ canvas/ # ç”»å¸ƒåŠŸèƒ½
â”‚ â”œâ”€â”€ nodes/ # èŠ‚ç‚¹åŠŸèƒ½
â”‚ â””â”€â”€ layout/ # å¸ƒå±€åŠŸèƒ½
â”œâ”€â”€ services/ # API æœåŠ¡
â”œâ”€â”€ hooks/ # è‡ªå®šä¹‰ Hooks
â””â”€â”€ shared/ # å…±äº«å·¥å…·å’Œé…ç½®

## æŠ€æœ¯æ ˆ
- React 18
- TypeScript
- D3.js - å¸ƒå±€ç®—æ³•
- Express - åç«¯æœåŠ¡
- OpenAI API - AIèƒ½åŠ›æ”¯æŒ

## ä½¿ç”¨è¯´æ˜

1. åˆ›å»ºèŠ‚ç‚¹
- æŒ‰ Tab é”®åˆ›å»ºæ–°çš„é—®é¢˜èŠ‚ç‚¹
- åŒå‡»èŠ‚ç‚¹ç¼–è¾‘å†…å®¹

2. æ“ä½œç”»å¸ƒ
- é¼ æ ‡æ‹–æ‹½ç§»åŠ¨ç”»å¸ƒ
- æ»šè½®ç¼©æ”¾ç”»å¸ƒ
- ç‚¹å‡»èŠ‚ç‚¹é€‰ä¸­

3. AI é—®ç­”
- ç¼–è¾‘é—®é¢˜èŠ‚ç‚¹è§¦å‘ AI å›ç­”
- æ”¯æŒæµå¼å“åº”æ˜¾ç¤º

## å¼€å‘æŒ‡å—

### ä»£ç è§„èŒƒ
- ä½¿ç”¨ ESLint å’Œ Prettier è¿›è¡Œä»£ç æ ¼å¼åŒ–
- éµå¾ª TypeScript ç±»å‹å®šä¹‰
- ç»„ä»¶é‡‡ç”¨å‡½æ•°å¼ç¼–ç¨‹

## å¸ƒå±€ç³»ç»Ÿ

æœ¬é¡¹ç›®å®ç°äº†ä¸€ä¸ªçµæ´»çš„èŠ‚ç‚¹å¸ƒå±€ç³»ç»Ÿï¼Œç”¨äºå¤„ç†æ€ç»´å¯¼å›¾ä¸­èŠ‚ç‚¹çš„åŠ¨æ€å¸ƒå±€ã€‚

### å¸ƒå±€ç³»ç»Ÿæ¶æ„

å¸ƒå±€ç³»ç»Ÿç”±ä»¥ä¸‹å‡ ä¸ªä¸»è¦éƒ¨åˆ†ç»„æˆï¼š

1. **å¸ƒå±€æœåŠ¡ (LayoutService)**ï¼š
   - ç®¡ç†ä¸åŒç±»å‹çš„å¸ƒå±€ç®—æ³•
   - æä¾›ç»Ÿä¸€çš„æ¥å£è¿›è¡Œå¸ƒå±€è®¡ç®—
   - æ”¯æŒåŠ¨æ€åˆ‡æ¢å¸ƒå±€ç±»å‹
   - ä½äº `src/features/layout/services/LayoutService.js`

2. **å¸ƒå±€ç®¡ç†å™¨ (LayoutManager)**ï¼š
   - å®ç°å…·ä½“çš„å¸ƒå±€ç®—æ³•
   - å½“å‰æ”¯æŒæ ‘å½¢å¸ƒå±€ (TreeLayoutManager)
   - æœªæ¥å¯æ‰©å±•æ”¯æŒåŠ›å¯¼å‘å¸ƒå±€ã€å¾„å‘å¸ƒå±€ç­‰
   - ä½äº `src/features/layout/utils/treeLayout.js`

3. **å¸ƒå±€é…ç½® (LayoutConfig)**ï¼š
   - é›†ä¸­ç®¡ç†å¸ƒå±€å‚æ•°
   - æ”¯æŒè‡ªå®šä¹‰é…ç½®
   - ä½äº `src/features/layout/config/layoutConfig.js`

### ä½¿ç”¨æ–¹æ³•

```javascript
// ä½¿ç”¨é»˜è®¤å¸ƒå±€æœåŠ¡
import { defaultLayoutService } from 'features/layout/services/LayoutService';

// è®¡ç®—èŠ‚ç‚¹å¸ƒå±€
const updatedNodes = defaultLayoutService.calculateLayout(nodes);

// æ›´æ–°å¸ƒå±€é…ç½®
defaultLayoutService.updateConfig({
  minNodeDistance: 100,
  questionAnswerGap: 200
});

// åˆ‡æ¢å¸ƒå±€ç±»å‹
defaultLayoutService.setLayoutType(LAYOUT_TYPES.TREE);
```

### æ‰©å±•å¸ƒå±€ç³»ç»Ÿ

è¦æ·»åŠ æ–°çš„å¸ƒå±€ç±»å‹ï¼Œéœ€è¦ï¼š

1. åˆ›å»ºæ–°çš„å¸ƒå±€ç®¡ç†å™¨ç±»ï¼Œå®ç° `calculateLayout` æ–¹æ³•
2. åœ¨ `LayoutService` ä¸­æ³¨å†Œæ–°çš„å¸ƒå±€ç®¡ç†å™¨
3. åœ¨ `LAYOUT_TYPES` ä¸­æ·»åŠ æ–°çš„å¸ƒå±€ç±»å‹
