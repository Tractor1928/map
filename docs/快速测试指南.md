# AI节点编辑功能测试指南

## 🎯 测试目标
验证在思维导图中编辑节点文本后能够自动触发AI回答节点生成。

## ✅ 测试步骤

### 1. 准备测试环境
```bash
# 启动开发服务器
npm run serve
```

### 2. 基础功能测试

#### 2.1 手动触发测试（之前已通过）
```javascript
// 在浏览器控制台执行
window.testAIResponse("什么是人工智能？")
```
**预期结果**：创建AI回答节点，显示"🤖 正在思考中..."

#### 2.2 真实节点编辑测试 ⭐ **重点测试**
1. **双击任意节点**进入编辑模式
2. **输入问题文本**，例如：
   - "什么是机器学习？"
   - "如何提高工作效率？"
   - "Vue.js有什么优点？"
3. **按Enter键或点击其他地方**完成编辑
4. **观察是否自动生成AI回答节点**

#### 2.3 不同问题类型测试
测试以下不同类型的问题：
- ✅ 直接疑问句："什么是...？"
- ✅ 疑问代词："为什么...？"、"怎么...？"
- ✅ 选择疑问："...还是...？"
- ✅ 反问句："...吗？"
- ❌ 陈述句："今天天气很好"（不应触发）

### 3. 调试信息检查

打开浏览器控制台，编辑节点时应该看到：
```
🔍 [AI调试] 节点文本编辑完成
🧠 [AI判断] 正在判断是否为问题类型
🧠 [AI判断] 检测到问题类型，将生成AI回答
🚀 [AI生成] 开始为节点创建AI回答
🏗️ [节点创建] 创建AI节点数据
🏗️ [节点创建] AI回答节点创建成功
```

### 4. 问题排查

#### 4.1 如果没有触发AI回答
检查控制台是否有：
- `🔍 [AI调试] 节点文本编辑完成` - 如果没有，说明事件监听有问题
- `🧠 [AI判断] 不是问题类型，跳过AI回答` - 说明文本不被识别为问题

#### 4.2 如果创建节点失败
检查是否有错误信息：
- `TypeError: Cannot read properties of undefined` - API调用问题
- `findLatestAIChildNode失败` - 节点查找问题

### 5. 高级测试

#### 5.1 连续编辑测试
1. 编辑节点A -> 生成AI回答A
2. 立即编辑节点B -> 生成AI回答B
3. 验证两个AI回答都能正常生成

#### 5.2 富文本编辑测试
如果启用了富文本编辑：
1. 双击节点进入富文本编辑
2. 输入问题文本
3. 完成编辑后检查是否触发AI回答

## 🐛 常见问题

### Q: 编辑完成后没有生成AI节点
**A**: 检查控制台调试信息，确认：
1. 是否触发了`node_text_edit_end`事件
2. 文本是否被识别为问题类型
3. 是否有JavaScript错误

### Q: 生成了空的AI节点
**A**: 检查：
1. AI服务配置是否正确
2. 网络连接是否正常
3. API密钥是否有效

### Q: 节点创建位置不对
**A**: 这是正常的，AI回答节点会作为问题节点的子节点创建

## 🎉 测试完成标准

- ✅ 双击编辑节点后能触发AI回答生成
- ✅ 不同类型的问题都能被正确识别
- ✅ 陈述句不会触发AI回答
- ✅ 控制台显示完整的调试信息
- ✅ 连续编辑多个节点都能正常工作

---
**测试时间**: 请记录测试结果和遇到的问题
**测试环境**: 浏览器版本、操作系统等信息 